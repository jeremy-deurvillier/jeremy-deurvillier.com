---
import Layout from '../layouts/Layout.astro';
import Button from '../components/Button.astro';
import Linkedin from '../components/svg/Linkedin.astro';
import Github from '../components/svg/Github.astro';
import Discord from '../components/svg/Discord.astro';
import About from '../components/About.astro';
---

<Layout path="/contact" title="Contact" description="">
	<section slot="header" class="min-h-[80vh] flex items-center justify-center">
		<div class="py-8 px-4 mx-auto max-w-screen-xl text-center lg:py-16">
			<h1 class="mb-4 text-4xl font-extrabold tracking-tight leading-none text-neutral-900 md:text-5xl lg:text-6xl dark:text-white">
                <strong class="text-blue">Discutons</strong> de votre futur <strong class="text-blue">projet</strong>
			</h1>
			<p class="mb-8 text-lg font-normal text-neutral-500 lg:text-xl sm:px-16 lg:px-48 dark:text-neutral-400">
                Transformez vos idées en actions concrètes, je vous accompagne.
			</p>
			<div class="flex flex-col space-y-4 sm:flex-row sm:justify-center sm:space-y-0">
                <Button tag="link" style="secondary" target="#formulaire" text="Je passe à l'action">
					<svg class="w-3.5 h-3.5 ms-2 translate-y-0.5 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10">
						<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5h12m0 0L9 1m4 4L9 9"/>
					</svg>
                </Button>
			</div>
		</div>
	</section>

    <section id="formulaire" class="min-h-screen bg-white dark:bg-neutral-900">
        <div class="container flex flex-col min-h-screen px-6 py-12 mx-auto">
            <div class="flex-1 lg:flex lg:items-center lg:-mx-6">
                <div class="text-neutral-500 dark:text-neutral-300 lg:w-1/2 lg:mx-6">
                    <h2 class="text-neutral-800 dark:text-white text-2xl font-semibold capitalize lg:text-3xl">Contact</h2>

                    <p class="max-w-xl mt-6">Un projet ? Une question ? Ce formulaire est pour vous !</p>

                    <div class="mt-6 space-y-8 md:mt-8">
                        <p class="flex items-start -mx-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 mx-2 text-blue" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                            </svg>

                            <span class="mx-2 truncate w-72">
                                Saint-Étienne, Lyon, Région AURA
                            </span>
                        </p>

                        <p class="flex items-start -mx-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 mx-2 text-blue" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                            </svg>

                            <a href="#contact" id="t-contact" class="mx-2 truncate w-72">Chargement ...</a>
                        </p>

                        <p class="flex items-start -mx-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 mx-2 text-blue" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                            </svg>

                            <a href="#contact" id="m-contact" class="mx-2 truncate w-72">Chargement ...</a>
                        </p>
                    </div>

                    <div class="mt-6 md:mt-8">
                        <h3 class="text-neutral-400">Hey ! Je suis aussi ici :</h3>

                        <div class="flex mt-4 -mx-1.5 gap-4">
                            <a class="social-links mx-1.5 text-blue" href="https://github.com/jeremy-deurvillier" target="_blank">
                                <Github class="w-7 h-7" />
                            </a>

                            <a class="social-links mx-1.5 text-blue" href="https://www.linkedin.com/in/jeremy-deurvillier/" target="_blank">
                                <Linkedin class="w-7 h-7" />
                            </a>

                            <a class="social-links mx-1.5 text-blue" href="https://discord.gg/NAxjvzWGmC" target="_blank">
                                <Discord class="w-8 h-8" />
                            </a>
                        </div>
                    </div>
                </div>

                <div class="mt-8 lg:w-1/2 lg:mx-6">
                    <div class="w-full px-6 sm:px-8 py-8 sm:py-10 mx-auto overflow-hidden bg-white shadow-2xl rounded-xl dark:bg-neutral-800 lg:max-w-xl">
                        <h3 class="text-xl font-medium text-neutral-700 dark:text-white">Formulaire de contact</h3>

                        <form method="POST" action="/contact" class="mt-4">
                            <div class="flex-1">
                                <label for="fullname" class="block mb-2 text-neutral-600 dark:text-neutral-200">Nom et prénom</label>
                                <input type="text" id="fullname" placeholder="Jane Doe" class="block w-full px-5 py-3 mt-2 text-neutral-700 bg-white border border-neutral-200 rounded-md dark:bg-neutral-800 dark:text-neutral-300 dark:border-neutral-600 focus:outline-4 outline-blue dark:outline-violet" required />
                            </div>

                            <div class="flex-1 mt-6">
                                <label for="email" class="block mb-2 text-neutral-600 dark:text-neutral-200">Adresse e-mail</label>
                                <input type="email" id="email" placeholder="jdoe@mail.fr" class="block w-full px-5 py-3 mt-2 text-neutral-700 bg-white border border-neutral-200 rounded-md dark:bg-neutral-800 dark:text-neutral-300 dark:border-neutral-600 focus:outline-4 outline-blue dark:outline-violet" required />
                            </div>

                            <div class="w-full mt-6">
                                <label for="message" class="block mb-2 text-neutral-600 dark:text-neutral-200">Message</label>
                                <textarea id="message" class="block w-full h-32 px-5 py-3 mt-2 text-neutral-700 placeholder-neutral-400 bg-white border border-neutral-200 rounded-md md:h-48 dark:bg-neutral-800 dark:text-neutral-300 dark:border-neutral-600 focus:outline-4 outline-blue dark:outline-violet" placeholder="Votre message" required></textarea>
                            </div>

                            <div class="w-full flex mt-6 *:w-full">
                                <Button tag="submit" text="Envoyer" />
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

	<About path="/contact" />

</Layout>

<style>
    .social-links:hover {
        animation: wiggle 1.5s linear infinite;
    }
</style>

<script>
(function() {

    /* ** Decode text contact */
    function decode(text: string): string {
        let parts: string[] = text.split(',');
        let numbers: number[] = [parseInt(parts[0]), parseInt(parts[1])];
        let code: string = `${Math.pow(numbers[0], 2) + numbers[1]}`;

        return code;
    }

    /* ** Format a text */
    function format(text: string): string {
        text = '0' + text.slice(3);

        return text.replace(/(\d{2})(?=\d)/g, '$1 ');
    }

    /* ** Show "t contact" */
    function showTContact() {
        const tContact: HTMLAnchorElement|null = document.querySelector('#t-contact');

        const partsContact: string[] = ['22,15', '18,11', '9,9', 'let'];

        let contact: string = '+337';
        contact += `${decode(partsContact[0])}${decode(partsContact[1])}${decode(partsContact[2])}`;
        let prefix: string = partsContact[3].split('').reverse().join('');

        tContact?.setAttribute('href', `${prefix}:${contact}`);

        if (tContact) tContact.textContent = format(contact);
    }

    /* ** Show  "m contact" */
    function showMContact() {
        const mContact: HTMLAnchorElement|null = document.querySelector('#m-contact');

        const partsContact: string[] = [
            'com',
            'jeremy',
            'contact',
            'deurvillier',
            'otliam'
        ];

        let contact: string = `${partsContact[2]}\u0040${partsContact[1]}-${partsContact[3]}.${partsContact[0]}`;
        let prefix: string = partsContact[4].split('').reverse().join('');

        mContact?.setAttribute('href', `${prefix}:${contact}`);

        if (mContact) mContact.textContent = contact;
    }

    document.addEventListener('DOMContentLoaded', () => {
        setTimeout(showTContact, 3000);
        setTimeout(showMContact, 3000);
    });
})();
</script>